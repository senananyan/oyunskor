SpilGames({waiton:"spilgames.loaded"},"SWPUtils SWP SWPEvent DOMSelect DOMEvent Placeholder Net EventTracker".split(" "),function(d,c,r,m,f,k,t,u){c.init("popup_login");m.get("#popup-login-username")&&(k.init("popup-login-username"),k.init("popup-login-password"));var n=!1,h=0,v=document.createElement("div"),a=function(a){return document.getElementById(a)||v},g=function(b,c){var l=a("popup-login-error-generic"),e=a("popup-login-error-banned"),f=a("popup-login-error-banned-underage");if(b)switch(c){case "banned":d.addClass(e,
"visible");break;case "banned-underage":d.addClass(f,"visible");break;default:d.addClass(l,"visible")}else d.removeClass(l,"visible"),d.removeClass(e,"visible")},e=function(b,l){h!==b&&2!==h&&(m.get("#popup-login-close")?(h=b,g(!1),a("popup-login-username").value="",a("popup-login-password").value="",a("popup-login-remember").checked=!0,1===b?(c.System.emit("popup.header.open"),d.removeClass(a("wdg_popup_login"),"hidden"),w(),/Trident/g.test(window.navigator.userAgent)||(document.getElementById("popup-login-username_ph")?
f.trigger("#popup-login-username_ph","keydown"):a("popup-login-username").focus())):(l||c.System.emit("popup.header.close"),c.System.emit("popup.closed",{type:"login"}),d.addClass(a("wdg_popup_login"),"hidden"))):(h=2,c.Widget.refresh({show_popup_contents:!0},{callback:function(){setTimeout(function(){k.init("popup-login-username");k.init("popup-login-password");h=0;e(1)},0)}})))},w=function(){!0!==n&&(n=!0,f.add(a("popup-login-form"),"submit",function(a){f.preventDefault(a);x()}),f.add(a("popup-login-close"),
"click",function(){e(0)}),f.add(a("popup-login-facebook"),"click",function(){p("facebook")}),f.add(a("popup-login-google"),"click",function(){p("google")}),f.add(a("popup-login-register"),"click",function(){e(0);c.System.emit("popup.register.open",{})}))},q=function(b){a("popup-login-button").enabled=b;d[b?"removeClass":"addClass"](a("popup-login-button"),"processing")},x=function(){if("undefined"===typeof a("popup-login-button").enabled||a("popup-login-button").enabled)g(!1),""===a("popup-login-password").value||
""===a("popup-login-username").value?g(!0):(c.System.emit("auth.login.request",{rememberMe:a("popup-login-remember").checked,username:a("popup-login-username").value,password:a("popup-login-password").value,callback:function(b){b.isError&&(b.scope&&b.scope.data&&"banned"==b.scope.data.string?(b=c.getProperty("ms_url")+"/v1/user-consent/underage-users/"+encodeURIComponent(a("popup-login-username").value),t.send({url:b,type:"GET"},function(a){if((a=JSON.parse(a))&&"undefined"!==typeof a.status)switch(a.status){case 0:case 1:g(!0,
"banned-underage");break;default:g(!0,"banned")}else g(!0,"banned")})):g(!0),q(!0))}}),q(!1))},p=function(b){var d=a("popup-login-remember").checked;c.System.emit("auth.login.remember",{rememberMe:d});e(0);c.System.emit("popup.oauth.open",{provider:b})};"onload"===c.getProperty("requires_auth")&&r.listen("onDisplayGame",function(){e(1)});c.System.init(function(a){var b=function(){var a=window.location.href.replace("http://","https://");a=d.setUrlValue("lg",1,a);u.encodedUrlParams(function(b){b&&(a=
d.setUrlValue("wpud",b,a));window.location.href=a})};if("https:"===window.location.protocol)switch(a.name){case "popup.login.open":0===h?e(1):e(0);break;case "popup.register.open":e(0,!0)}else b()},!0)});
//# sourceMappingURL=wdg_popup_login-MINIFIED-43471064616fdfa4af2a3d6c8037c5b0.js.map
