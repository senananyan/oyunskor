SpilGames({name:"wdg_popup_register_feedback",waiton:"spilgames.loaded"},"SWPUtils SWP SWPEvent JSLib DOMSelect PopupRegisterFeedback PopupRegisterFeedbackHelper Portal".split(" "),function(c,b,f,g,e,d,m,p){function h(a){g("api.user.get",function(b){a(b)})}b.init("popup_register_feedback");var l=b.getProperty("show_popup_contents"),k=function(){var a=!1;return function(){a||(m.init(".wdg_popup_register_feedback"),d.init({container:".wdg_popup_register_feedback",elements:{closeButton:"popup-register-feedback-close"}}),
a=!0)}}();b.System.init(function(a){var g,n,e,f=a.body&&a.body.type,c=a.body&&a.body.username;switch(a.name){case "popup.register.feedback":var r=function(){k();n={username:c||""};e="";h(function(a){if(!a.error&&a.userInfo){n.username=a.userInfo.name||n.username;e=a.userInfo.avatarUrl;a=a.userInfo.guid;p.get("siteid");var k=document.getElementById("wdg_popup_register_feedback_version"),q=document.getElementById("wdg_prf_campaignid"),c=document.getElementById("wdg_prf_productid"),l=document.getElementById("wdg_prf_conversiontype");
if(null!==k&&"object"==typeof k&&""!=q.value&&""!=c.value&&""!=l.value){var h=document.createElement("IFRAME");h.setAttribute("src","/wdg/popup_register_feedback-"+k.value+"/tt/conversion.html?campaignID="+q.value+"&productID="+c.value+"&conversionType="+l.value+"&GUID="+a+"&transactionID="+a);h.style.width="1px";h.style.height="1px";document.body.appendChild(h)}}g=m.whichPopupToShow(f,e);d.open(g,n);b.System.emit("popup.header.open")})};l?!0===l&&r():(l="loading",b.Widget.refresh({show_popup_contents:!0},
{callback:function(){setTimeout(function(){l=!0;r()},0)}}))}});f.listen("popup.registration.feedback.closed",function(){b.System.emit("registration.finished");b.System.emit("popup.header.close")})});SpilGames("spilgames.import",{name:"PopupRegisterFeedback",deps:["SWPEvent","SWPUtils","Utils","DOMSelect","DOMEvent"],module:function(c,b,f,g,e){var d,m,p=function(g){e.add(d,"click",function(a){b.hasClass(a.target||a.srcElement,g.closeButton)&&h()})},h=function(){c.emit("popup.registration.feedback.closed");b.addClass(m,"hidden")},l=function(){var k=g.getAll(d+" > article");f.each(k,function(a,g,d){b.hasClass(a,"hidden")||b.addClass(a,"hidden")})};return{init:function(b){d=b.container;m=g.get(d);
p(b.elements)},open:function(e,a){if(e){l();var c,h,f,k;if(a){f=g.get(d+" > #"+e);k=f.innerHTML;for(c in a)a.hasOwnProperty(c)&&(h=new RegExp("\\["+c+"\\]","g"),k=k.replace(h,a[c]));f.innerHTML=k}(c=g.get(d+" > #"+e))&&b.removeClass(c,"hidden");b.removeClass(m,"hidden")}},close:h}}});SpilGames("spilgames.import",{name:"PopupRegisterFeedbackHelper",deps:["DOMSelect"],module:function(c){function b(){var b=!1,e=c.get(f);e&&(b="true"===e.getAttribute("data-on-social-game-page"));return b}var f;return{init:function(b){f=b},whichPopupToShow:function(c,e){var d;switch(c){case "link":b()?d="link-social":(d=(e||"").split("/").pop(),d="dummy_small.png"!==d&&"dummy_small.gif"!==d?"link-regular":"link-regular-without-avatar");break;default:case "register":d=b()?"registration-social":"registration-regular"}return d}}}});
//# sourceMappingURL=wdg_popup_register_feedback-MINIFIED-b10bbef4c3d34ca78376c068804b10a1.js.map
