SpilGames("SWP Utils DOMSelect Cache DOMEvent BeLazy Tooltip Cookie Net ThumbnailTracker".split(" "),function(d,f,l,h,G,m,A,q,r,B){d.init("recent_played_games");var t=window.document,b=d.getProperty("*"),e=t.getElementById("wdg_recent_played_games"),u=b.global_user_id,v=b.siteid,w=d.get("spilgames.module.spapi.backend"),k="recent.played.games."+b.global_user_id,n=function(a,c){h.getItem("backend"===a?k:"recent.played.games",function(a){c(f.isArray(a)?a:[])})},C=function(a){h.getItem(k+".synced",function(c){a(f.isBoolean(c)?
c:!1)})},p=function(a){h.setItem({key:k+".synced",value:!0===a,expires:2592E3})},D=function(a){var c={url:w+"v1/recently-played/"+v+"/"+u+"/"+a,type:"PUT",dataType:"text",data:"",headers:{"x-auth-token":q.getItem("token")}};x("backend",a,!0);r.send(c,function(a){a.isError&&p(!1)})},E=function(a){var c=[];a.forEach(function(a){c.push({id:a,date:0})});a={url:w+"v1/recently-played/"+v+"/"+u,type:"POST",dataType:"json",data:JSON.stringify({items:c.slice(0,b.games_limit_authenticated)}),headers:{"x-auth-token":q.getItem("token")}};
r.send(a,function(a){a.isError?p(!1):p(!0)})},x=function(a,c,d){a=a||b.storage_endpoint;c=c||b.app_id;"backend"!==a||d?n(a,function(g){var d=g.indexOf(c);-1<d&&g.splice(d,1);g.unshift(c);h.setItem({key:"backend"===a?k:"recent.played.games",value:g.slice(0,b.games_limit_client_storage),expires:15552E3})}):D(c)},F=function(){"wdg_page_game"===b.top_level_widget&&(d.Utils.addClass(e,"is-loading"),setTimeout(function(){d.Utils.removeClass(e,"is-loading")},6E3));var a=d.getProperty("wdg_id");a&&"wdg_recent_played_games"!=
a&&(e.id=a,e=t.getElementById(a),e.className=a+" "+e.className);"game_thumb"===b.ui_format&&A.create(".wdg_recent_played_games .recent-game");d.getProperty("no_recent_games")?d.System.emit("recent.played.empty"):(d.System.emit("recent.played.filled"),window.setTimeout(m.trigger,500));m.handleImagesIn(e);B.track(e)},y=function(a,c,b){var d=a[0];d?n(d,function(g){a.shift();c[d]=g;y(a,c,b)}):b(c)};l=function(){if(!0!==b.track_only){var a=["client"];"backend"===b.storage_endpoint&&(a[1]="backend");y(a,
{},function(a){d.Widget.refresh({app_list:JSON.stringify(a),ui_format:b.ui_format,xhr:!0,lazyload_images:b.lazyload_images,lazyload_from_item:b.lazyload_from_item,tracking_postfix:b.tracking_postfix,top_level_widget:b.top_level_widget,widget:b.wdg_id},{callback:F})})}};var z=f.once(l);(function(a){"backend"===a&&C(function(a){a||n("backend",function(a){a=a.map(function(a){f.isObject(a)&&a.gid&&(a=a.gid);return a}).filter(function(a){return f.isString(a)});0<a.length&&E(a)})})})(b.storage_endpoint);
f.isEmpty(b.wait_on_js_event)&&l();m.until("visible",e,function(){d.System.emit("recent.played.visible")});d.System.init(function(a){var c=a&&a.data?a.data:{};switch(a.name){case "inlinegame.open":case "recent.played.games.update":x(void 0,c.applicationId||void 0,!1);break;case "game.sidepanel.open":"recent_played_games"!==c.item||f.isEmpty(b.wait_on_js_event)||z();break;case b.wait_on_js_event:z()}})});
//# sourceMappingURL=wdg_recent_played_games-MINIFIED-750123a1bbcd06b0bbad13d3fce7a3e7.js.map
